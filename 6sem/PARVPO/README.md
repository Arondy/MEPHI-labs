# Лабораторные работы по ПАРВПО (6 семестр)

В этом репозитории собраны лабораторные работы по курсу "ПАРВПО", посвященные исследованию влияния различных инструментов и методов на производительность программного обеспечения.

## Структура репозитория

- `lab1/` - Влияние компоновки на производительность
- `lab2/` - Исследование временных характеристик системных часов
- `lab3/` - Анализ производительности подсистемы памяти
- `lab4/` - Сравнение производительности файлового ввода-вывода и SQLite
- `lab7/` - Исследование влияния уровней оптимизации компилятора
- `lab8/` - Оптимизация с использованием LTO (Link Time Optimization)
- `lab9/` - Исследование контрактов с компилятором

## Подробное описание лабораторных работ

### Лабораторная работа 1: Влияние компоновки на производительность
**Цель:** Исследование влияния различных способов компоновки на производительность программы

**Основные задачи:**
- Создание программы для решения большого числа квадратных уравнений
- Исследование влияния ключевого слова `inline` на производительность
- Сравнение различных подходов к организации кода:
  - Все функции в одном файле
  - Функции с `inline` в одном файле
  - Функции в отдельных единицах трансляции
  - Компиляция всех файлов за один вызов компилятора
- Анализ времени работы каждого варианта

**Файлы:**
- `main.cpp` - Основной файл с тестовым кодом
- `equation_solver.cpp` - Функции для решения уравнений
- `CMakeLists.txt` - Файл для сборки проекта
- Отчет по лабораторной работе

### Лабораторная работа 2: Исследование временных характеристик системных часов
**Цель:** Анализ точности и производительности различных источников времени

**Основные задачи:**
- Определение разрешения и погрешности часов реального времени
- Исследование поддерживаемых типов системных часов
- Измерение времени инициализации и времени отклика для каждого типа часов
- Определение коэффициента пересчета тактов RDTSC в секунды
- Сравнение различных методов измерения времени

**Файлы:**
- `measure_rdtsc_qpc.cpp` - Сравнение RDTSC и QueryPerformanceCounter
- `measure_rdtsc_rtc.cpp` - Сравнение RDTSC и часов реального времени
- `qpc.cpp` - Реализация замеров с QPC
- `rdtsc.cpp` - Реализация замеров с RDTSC
- `rtc.cpp` - Реализация замеров с RTC
- Отчет по лабораторной работе

### Лабораторная работа 3: Анализ производительности подсистемы памяти
**Цель:** Исследование характеристик кэш-памяти и оперативной памяти

**Основные задачи:**
- Измерение пропускной способности кэшей L1, L2, L3 и ОЗУ
- Определение таймингов оперативной памяти
- Оценка времени выполнения различных операций с памятью
- Исследование влияния размера рабочего набора на производительность
- Анализ зависимости времени доступа к памяти от размера данных

**Файлы:**
- `main.cpp` - Программа для тестирования производительности памяти
- Отчет по лабораторной работе

### Лабораторная работа 4: Сравнение производительности файлового ввода-вывода и SQLite
**Цель:** Сравнение эффективности хранения и обработки данных в файлах и СУБД

**Основные задачи:**
- Генерация большого набора случайных строк
- Сравнение времени записи данных в файл и базу данных SQLite
- Анализ времени чтения данных из разных источников
- Исследование производительности поиска подстрок в файлах и БД
- Оптимизация операций ввода-вывода

**Файлы:**
- `main.cpp` - Основной файл с тестами производительности
- `CMakeLists.txt` - Файл для сборки проекта
- `sqlite/` - Подключение SQLite
- `database_filler.py` - Скрипт для наполнения базы данных
- Отчет по лабораторной работе

### Лабораторная работа 7: Исследование влияния уровней оптимизации компилятора
**Цель:** Анализ влияния различных уровней оптимизации на производительность

**Основные задачи:**
- Разработка тестового алгоритма решения квадратных уравнений
- Сборка с различными уровнями оптимизации компилятора
- Сравнение времени сборки, времени работы и размера исполняемого файла
- Анализ эффективности различных уровней оптимизации
- Исследование конкретных оптимизаций, применяемых на каждом уровне

**Файлы:**
- `main.cpp` - Программа для тестирования производительности
- `time.ps1` - Скрипт для замера времени выполнения
- `py-graphs` - Построение графиков
- Отчет по лабораторной работе

### Лабораторная работа 8: Оптимизация с использованием LTO (Link Time Optimization)
**Цель:** Исследование влияния сквозной оптимизации на этапе компоновки

**Основные задачи:**
- Создание тестового приложения для решения квадратных уравнений
- Сравнение различных вариантов оптимизации:
  - Без LTO с разными уровнями оптимизации (-Oz, -O2)
  - С тонкой оптимизацией (thin LTO)
  - С полной оптимизацией (full LTO)
- Анализ времени сборки, размера исполняемого файла и быстродействия
- Оценка эффективности различных подходов к оптимизации

**Файлы:**
- `main.cpp` - Основной файл с тестовым кодом, импортирует другие файлы
- `equation_solver.cpp`, `equation_solver.h` - Файлы с функциями для решения квадратных уравнений
- `time.ps1` - Скрипт для замера времени выполнения
- Отчет по лабораторной работе

### Лабораторная работа 9: Исследование контрактов с компилятором
**Цель:** Анализ влияния различных типов контрактов с компилятором на производительность

**Основные задачи:**
- Создание тестового приложения для решения квадратных уравнений
- Исследование влияния различных типов контрактов:
  - `const` и `constexpr` переменные
  - `restrict` указатели
- Анализ времени выполнения при различных уровнях оптимизации

**Файлы:**
- `main.cpp` - Основной файл с тестовым кодом
- `restricted_test.cpp` - Использование `restrict` указателей
- `py-graphs/` - Скрипты для визуализации результатов
- Отчет по лабораторной работе

## Требования

- Компилятор с поддержкой C++17 (GCC, Clang, MSVC)
- OpenMP (для лабораторных работ 1, 7-9)
- SQLite3 (для лабораторной работы 4)
- CMake 3.XX
- Поддержка AVX (для лабораторных работ 1, 7-9)

## Сборка и запуск

### Сборка с помощью CMake (рекомендуется)

```bash
mkdir build && cd build
cmake ..
cmake --build .
```
### Ручная компиляция (avx и openmp для ЛР 1, 7-9)

```bash
g++ -mavx -fopenmp main.cpp -o main
./main
```

Для лабораторной работы 9 с использованием restrict указателей:
```bash
g++ -mavx -fopenmp -DUSE_RESTRICT restricted_test.cpp -o restricted_test
./restricted_test
```

### Запуск тестов производительности

Для лабораторных работ 7 и 8 необходимо использовать скрипт `time.ps1` для замера времени выполнения:

```powershell
.\time.ps1
```

## Примечания

1. AVX и OpenMP используются в лабораторных работах 1, 7 и 8 для ускорения генерации случайных коэффициентов.
Для работы с AVX необходим процессор с поддержкой этих инструкций.